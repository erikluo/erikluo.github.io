+++
title = 'ComfyUI快速上手'
date = 2024-01-20T09:36:16+08:00
draft = true
tags = ["comfy"]
+++

## 简介

ComfyUI是开源“稳定扩散”作图工具。这是一款搭积木式的 Stable Diffusion （SD）工具。其他工具都是基本编好了固定流程，用户导入AI模型，设置参数，按键开始生成图像。但  Comfy UI 则是由用户自己加入节点，搭建整个流程，因而具有极大的灵活性。举例说，你可以先后用多个不同的模型进行"diffusion"。

## 安装

windows版本有打包好的安装包

[下载地址](https://github.com/comfyanonymous/ComfyUI/releases)

## 运行

启动运行 Comfy UI 后，界面上只出现一个操作版。在界面空处点击右鼠标会出现一个菜单，可以选择加入不同类型的节点。节点在界面上是一个方框。方框左边的圆点表示在该节点的输入，右边则是输出。加入需要的节点后，把各个方框的输入/输出正确连线，再点击操作板上的“Queue Prompt"就可以开始了。对于最简单的 SD 图像生成，需要这几个节点。

1. SD 模型的 checkpoint （模型文件） --- 这是一个 SD模型训练快照。不同的模型可以在 civitai.com 等网站下载，模型文件一般有两个GB以上。这个节点在 Comfy UI 上有三个输出，model, CLIP, 与 VAE。

2. CLIP Text Encode （文字编码）：这类节点的作用是将用户输入的文字调用模型的CLIP，编码成模型可用的数据。用户需要输入两段文字，一段是正面的描述（需要什么），一段是反面描述（不要什么）。比如说，正面输入可以是“一只熊猫”， 反面可以是“猫”。

3. Latent Image（潜在图像数据）: 这是图像的出发点，但是被转换成模型内部的数据格式。如果是全新“创作”，出发点是空的 （ Empty Latent  Image)。

4.  Sampler(选样器）： 这是整个 SD 流程的核心，它的任务是用上面的东西作为输入，根据用户的设置的其他参数，用SD算法进行迭代生成图像。但是这个图像的数据是一种内部的表达，是潜在数据。

5. VAE Decode （VAE 解码）：这个的功能是将 Sampler 生成的潜在数据用 VAE 解码成图像。

6. Save Image (图像存写）：顾名思义，将解码得到的图像存写到硬盘。

学会以上的东西后，你对 SD 的内部工作机制也会有相当的了解。。
